<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Boletas - Física Simple</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.cdnfonts.com/css/proxima-nova-2');
        @import url('https://fonts.cdnfonts.com/css/8bit-operator');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            padding: 10px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border: 3px solid #000;
            border-radius: 0;
        }

        h1 {
            text-align: center;
            margin-bottom: 25px;
            font-family: 'Proxima Nova', sans-serif;
            color: #000;
            font-size: 24px;
            padding-bottom: 15px;
            border-bottom: 2px solid #000;
        }

        .form-section {
            margin-bottom: 20px;
        }

        .form-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 15px;
            color: #000;
        }

        .form-section input,
        .form-section select {
            width: 100%;
            padding: 12px;
            border: 2px solid #000;
            border-radius: 0;
            font-size: 16px;
            color: #000;
            background-color: #fff;
        }

        .form-section input:focus,
        .form-section select:focus {
            outline: none;
            border: 3px solid #000;
        }

        .items-section {
            margin-bottom: 20px;
        }

        .items-section h3 {
            margin-bottom: 15px;
            font-size: 18px;
            color: #000;
            padding-bottom: 10px;
            border-bottom: 2px solid #000;
        }

        .item-row {
            background: #fff;
            border: 2px solid #000;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }

        .item-row input {
            width: 100%;
            padding: 10px;
            border: 2px solid #000;
            border-radius: 0;
            font-size: 15px;
            margin-bottom: 10px;
            color: #000;
            background-color: #fff;
        }

        .item-row input:focus {
            outline: none;
            border: 3px solid #000;
        }

        .item-row label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 13px;
            color: #000;
        }

        .item-header {
            display: none;
        }

        .btn {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #000;
            border-radius: 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.2s;
            background-color: #fff;
            color: #000;
        }

        .btn:active {
            background-color: #000;
            color: #fff;
        }

        .btn-add {
            background-color: #fff;
            color: #000;
            border: 2px solid #000;
        }

        .btn-remove {
            background-color: #fff;
            color: #000;
            border: 2px solid #000;
            padding: 10px;
            font-size: 14px;
            width: 100%;
            margin-top: 5px;
        }

        .btn-print {
            background-color: #000;
            color: #fff;
            font-size: 18px;
            margin-top: 20px;
            border: 3px solid #000;
        }

        .btn-print:active {
            background-color: #fff;
            color: #000;
        }

        .total-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 3px solid #000;
        }

        .total-display {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            padding: 15px;
            background-color: #fff;
            border: 3px solid #000;
            margin-bottom: 20px;
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .container {
                padding: 15px;
                border: 2px solid #000;
            }

            h1 {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .form-section input,
            .form-section select {
                padding: 10px;
                font-size: 15px;
            }
        }

        /* Estilos para la boleta imprimible */
        .boleta {
            display: none;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                display: none;
            }

            .boleta {
                display: block;
                width: 80mm;
                max-width: 80mm;
                margin: 0 auto;
                padding: 5mm;
                font-family: '8bit Operator+', monospace;
                font-size: 9pt;
                color: #000;
            }

            .boleta-header {
                text-align: center;
                margin-bottom: 8px;
                border-bottom: 1px dashed #000;
                padding-bottom: 8px;
            }

            .boleta-logo {
                font-family: 'Proxima Nova', sans-serif;
                font-size: 18pt;
                font-weight: bold;
                margin-bottom: 4px;
            }

            .boleta-contacto {
                font-size: 7pt;
                line-height: 1.3;
            }

            .boleta-titulo {
                text-align: center;
                font-weight: bold;
                font-size: 10pt;
                margin: 8px 0;
                border-top: 1px dashed #000;
                border-bottom: 1px dashed #000;
                padding: 5px 0;
            }

            .boleta-info {
                font-size: 8pt;
                margin-bottom: 8px;
                line-height: 1.5;
            }

            .boleta-items {
                margin: 8px 0;
            }

            .boleta-item-header {
                display: grid;
                grid-template-columns: 35px 1fr 50px 60px;
                font-size: 7pt;
                font-weight: bold;
                border-bottom: 1px solid #000;
                padding-bottom: 3px;
                margin-bottom: 5px;
            }

            .boleta-item {
                display: grid;
                grid-template-columns: 35px 1fr 50px 60px;
                font-size: 8pt;
                margin-bottom: 4px;
                line-height: 1.3;
            }

            .boleta-total {
                margin-top: 8px;
                padding-top: 8px;
                border-top: 2px solid #000;
                font-weight: bold;
                font-size: 11pt;
                text-align: right;
            }

            .boleta-pago {
                margin-top: 8px;
                font-size: 8pt;
            }

            .boleta-footer {
                margin-top: 10px;
                padding-top: 8px;
                border-top: 1px dashed #000;
                text-align: center;
            }

            .boleta-gracias {
                font-size: 10pt;
                font-weight: bold;
                margin-bottom: 6px;
            }

            .boleta-redes {
                font-size: 7pt;
                line-height: 1.5;
            }

            .boleta-disclaimer {
                margin-top: 10px;
                padding-top: 8px;
                border-top: 1px dashed #000;
                font-size: 5pt;
                line-height: 1.4;
                text-align: justify;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Generador de Boletas - Física Simple ;)</h1>

        <div class="form-section">
            <label>Fecha:</label>
            <input type="date" id="fecha" value="">
        </div>

        <div class="form-section">
            <label>Cliente (opcional):</label>
            <input type="text" id="cliente" placeholder="Nombre del cliente">
        </div>

        <div class="form-section">
            <label>ID Interno (opcional):</label>
            <input type="text" id="idInterno" placeholder="Número de orden">
        </div>

        <div class="items-section">
            <h3>Productos</h3>
            <div class="item-header">
                <div>Cant.</div>
                <div>Producto/Servicio</div>
                <div>Precio Unit.</div>
                <div>Subtotal</div>
                <div></div>
            </div>
            <div id="itemsContainer"></div>
            <button class="btn btn-add" onclick="agregarItem()">+ AGREGAR PRODUCTO</button>
        </div>

        <div class="total-section">
            <div class="total-display">
                TOTAL: $ <span id="totalDisplay">0.00</span>
            </div>

            <div class="form-section">
                <label>Forma de pago:</label>
                <select id="formaPago">
                    <option value="Efectivo">Efectivo</option>
                    <option value="Transferencia">Transferencia</option>
                    <option value="Mercado Pago">Mercado Pago</option>
                    <option value="Otros">Otros</option>
                </select>
            </div>

            <div class="form-section" id="otrosPagoDiv" style="display: none;">
                <label>Especificar forma de pago:</label>
                <input type="text" id="otrosPago" placeholder="Ej: Tarjeta, MercadoPago, etc.">
            </div>
        </div>

        <button class="btn btn-print" onclick="generarBoleta()">GENERAR E IMPRIMIR BOLETA</button>
    </div>

    <!-- Boleta para imprimir -->
    <div class="boleta" id="boleta">
        <div class="boleta-header">
            <div class="boleta-logo">Física Simple ;)</div>
            <div class="boleta-contacto">
                Instagram: @fisicasimpleuy<br>
                Facebook: Física Simple<br>
                www.fisicasimple.com
            </div>
        </div>

        <div class="boleta-titulo">
            DETALLE DE COMPRA<br>
            DOCUMENTO SIN VALOR FISCAL
        </div>

        <div class="boleta-info">
            <div><strong>Fecha:</strong> <span id="boletaFecha"></span></div>
            <div id="boletaClienteDiv" style="display: none;"><strong>Cliente:</strong> <span id="boletaCliente"></span></div>
            <div id="boletaIdDiv" style="display: none;"><strong>ID Interno:</strong> <span id="boletaId"></span></div>
        </div>

        <div class="boleta-items">
            <div class="boleta-item-header">
                <div>Cant.</div>
                <div>Producto</div>
                <div>P. Unit.</div>
                <div>Subtotal</div>
            </div>
            <div id="boletaItemsContainer"></div>
        </div>

        <div class="boleta-total">
            TOTAL: $ <span id="boletaTotal"></span>
        </div>

        <div class="boleta-pago">
            <strong>Forma de pago:</strong> <span id="boletaPago"></span>
        </div>

        <div class="boleta-footer">
            <div class="boleta-gracias">Gracias por tu compra.</div>
            <div class="boleta-redes">
                Instagram: @fisicasimpleuy<br>
                Facebook: Física Simple<br>
                www.fisicasimple.com
            </div>
        </div>

        <div class="boleta-disclaimer">
            Este documento es SOLO informativo. No es factura, ticket ni recibo fiscal ante DGI y no discrimina IVA. Cuando corresponda, la operación será documentada por el comprobante fiscal válido.
        </div>
    </div>

    <script>
        let itemCount = 0;

        // Establecer fecha actual
        document.getElementById('fecha').valueAsDate = new Date();

        // Mostrar campo de otros si se selecciona
        document.getElementById('formaPago').addEventListener('change', function() {
            const otrosDiv = document.getElementById('otrosPagoDiv');
            if (this.value === 'Otros') {
                otrosDiv.style.display = 'block';
            } else {
                otrosDiv.style.display = 'none';
            }
        });

        function agregarItem() {
            itemCount++;
            const container = document.getElementById('itemsContainer');
            const itemDiv = document.createElement('div');
            itemDiv.className = 'item-row';
            itemDiv.id = `item-${itemCount}`;
            itemDiv.innerHTML = `
                <label>Cantidad:</label>
                <input type="number" min="1" value="1" class="item-cantidad" onchange="calcularTotal()">
                
                <label>Nombre del Producto:</label>
                <input type="text" placeholder="Ej: Cuaderno, Lapicera..." class="item-nombre">
                
                <label>Precio Unitario ($):</label>
                <input type="number" min="0" step="0.01" placeholder="0.00" class="item-precio" onchange="calcularTotal()">
                
                <label>Subtotal ($):</label>
                <input type="text" class="item-subtotal" readonly value="0.00">
                
                <button class="btn btn-remove" onclick="eliminarItem(${itemCount})">✕ ELIMINAR PRODUCTO</button>
            `;
            container.appendChild(itemDiv);
        }

        function eliminarItem(id) {
            const item = document.getElementById(`item-${id}`);
            if (item) {
                item.remove();
                calcularTotal();
            }
        }

        function calcularTotal() {
            const items = document.querySelectorAll('.item-row');
            let total = 0;

            items.forEach(item => {
                const cantidad = parseFloat(item.querySelector('.item-cantidad').value) || 0;
                const precio = parseFloat(item.querySelector('.item-precio').value) || 0;
                const subtotal = cantidad * precio;
                item.querySelector('.item-subtotal').value = subtotal.toFixed(2);
                total += subtotal;
            });

            document.getElementById('totalDisplay').textContent = total.toFixed(2);
        }

        function generarBoleta() {
            // Validar que haya al menos un producto
            const items = document.querySelectorAll('.item-row');
            if (items.length === 0) {
                alert('Debes agregar al menos un producto');
                return;
            }

            // Validar que todos los productos tengan nombre y precio
            let valido = true;
            items.forEach(item => {
                const nombre = item.querySelector('.item-nombre').value.trim();
                const precio = item.querySelector('.item-precio').value;
                if (!nombre || !precio) {
                    valido = false;
                }
            });

            if (!valido) {
                alert('Todos los productos deben tener nombre y precio');
                return;
            }

            // Llenar datos de la boleta
            const fecha = document.getElementById('fecha').value;
            const fechaFormateada = fecha ? new Date(fecha + 'T00:00:00').toLocaleDateString('es-UY') : '___/___/______';
            document.getElementById('boletaFecha').textContent = fechaFormateada;

            const cliente = document.getElementById('cliente').value.trim();
            const clienteDiv = document.getElementById('boletaClienteDiv');
            if (cliente) {
                document.getElementById('boletaCliente').textContent = cliente;
                clienteDiv.style.display = 'block';
            } else {
                clienteDiv.style.display = 'none';
            }

            const idInterno = document.getElementById('idInterno').value.trim();
            const idDiv = document.getElementById('boletaIdDiv');
            if (idInterno) {
                document.getElementById('boletaId').textContent = idInterno;
                idDiv.style.display = 'block';
            } else {
                idDiv.style.display = 'none';
            }

            // Llenar items
            const boletaItemsContainer = document.getElementById('boletaItemsContainer');
            boletaItemsContainer.innerHTML = '';
            
            items.forEach(item => {
                const cantidad = item.querySelector('.item-cantidad').value;
                const nombre = item.querySelector('.item-nombre').value;
                const precio = parseFloat(item.querySelector('.item-precio').value).toFixed(2);
                const subtotal = item.querySelector('.item-subtotal').value;

                const itemDiv = document.createElement('div');
                itemDiv.className = 'boleta-item';
                itemDiv.innerHTML = `
                    <div>${cantidad}</div>
                    <div>${nombre}</div>
                    <div>$${precio}</div>
                    <div>$${subtotal}</div>
                `;
                boletaItemsContainer.appendChild(itemDiv);
            });

            // Total
            document.getElementById('boletaTotal').textContent = document.getElementById('totalDisplay').textContent;

            // Forma de pago
            let formaPago = document.getElementById('formaPago').value;
            if (formaPago === 'Otros') {
                const otros = document.getElementById('otrosPago').value.trim();
                formaPago = otros || 'Otros';
            }
            document.getElementById('boletaPago').textContent = formaPago;

            // Imprimir
            setTimeout(() => {
                window.print();
            }, 100);
        }

        // Agregar un item inicial
        agregarItem();
    </script>
</body>
</html>
